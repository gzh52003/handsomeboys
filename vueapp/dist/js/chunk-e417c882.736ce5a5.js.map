{"version":3,"sources":["webpack:///./node_modules/vant/es/form/style/index.js","webpack:///./src/views/repassword.vue?326a","webpack:///src/views/repassword.vue","webpack:///./src/views/repassword.vue?1cec","webpack:///./src/views/repassword.vue","webpack:///./node_modules/vant/es/form/index.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","_v","on","onSubmit","attrs","model","value","ruleForm","callback","$$v","$set","expression","staticStyle","staticRenderFns","name","data","username","oldpass","newPass","methods","component","_createNamespace","createComponent","bem","props","colon","Boolean","labelWidth","Number","String","labelAlign","inputAlign","scrollToError","validateFirst","errorMessageAlign","submitOnEnter","type","default","validateTrigger","showError","showErrorMessage","provide","vanForm","fields","validateSeq","_this","Promise","resolve","reject","errors","reduce","promise","field","then","length","validate","error","push","validateAll","_this2","all","map","item","filter","validateField","matched","resetValidation","forEach","scrollToField","options","$el","scrollIntoView","addField","removeField","getValues","form","formValue","event","preventDefault","submit","_this3","values","$emit","catch","h","arguments","slots"],"mappings":"kHAAA,W,yCCAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,KAAK,CAACJ,EAAIM,GAAG,UAAUF,EAAG,WAAW,CAACG,GAAG,CAAC,OAASP,EAAIQ,WAAW,CAACJ,EAAG,YAAY,CAACK,MAAM,CAAC,KAAO,WAAW,MAAQ,MAAM,YAAc,OAAOC,MAAM,CAACC,MAAOX,EAAIY,SAAiB,SAAEC,SAAS,SAAUC,GAAMd,EAAIe,KAAKf,EAAIY,SAAU,WAAYE,IAAME,WAAW,uBAAuBZ,EAAG,YAAY,CAACK,MAAM,CAAC,KAAO,WAAW,KAAO,UAAU,MAAQ,MAAM,YAAc,OAAOC,MAAM,CAACC,MAAOX,EAAIY,SAAgB,QAAEC,SAAS,SAAUC,GAAMd,EAAIe,KAAKf,EAAIY,SAAU,UAAWE,IAAME,WAAW,sBAAsBZ,EAAG,YAAY,CAACK,MAAM,CAAC,KAAO,UAAU,KAAO,WAAW,MAAQ,MAAM,YAAc,OAAOC,MAAM,CAACC,MAAOX,EAAIY,SAAgB,QAAEC,SAAS,SAAUC,GAAMd,EAAIe,KAAKf,EAAIY,SAAU,UAAWE,IAAME,WAAW,sBAAsBZ,EAAG,MAAM,CAACa,YAAY,CAAC,OAAS,SAAS,CAACb,EAAG,aAAa,CAACK,MAAM,CAAC,MAAQ,GAAG,MAAQ,GAAG,KAAO,OAAO,cAAc,WAAW,CAACT,EAAIM,GAAG,SAAS,IAAI,IAAI,IAC/9BY,EAAkB,G,4DCqBtB,mBAEA,OACEC,KAAM,aACNC,KAFF,WAGI,MAAO,CACLR,SAAU,CACRS,SAAU,GACVC,QAAS,GACTC,QAAS,MAIfC,QAAS,CACP,SADJ,SACA,gLACA,qBADA,SAEA,yBACA,oBACA,oBAJA,mBAEA,EAFA,EAEA,KAIA,mBANA,iCAQA,wBACA,oBACA,oBAVA,gBAQA,EARA,EAQA,KAIA,oBACA,YACA,kBACA,0BAEA,eAjBA,wBAoBA,oBApBA,iDCpCoV,I,YCOhVC,EAAY,eACd,EACA1B,EACAmB,GACA,EACA,KACA,KACA,MAIa,aAAAO,E,6CClBf,4BAGIC,EAAmB,eAAgB,QACnCC,EAAkBD,EAAiB,GACnCE,EAAMF,EAAiB,GAEZ,OAAAC,EAAA,CACbE,MAAO,CACLC,MAAOC,QACPC,WAAY,CAACC,OAAQC,QACrBC,WAAYD,OACZE,WAAYF,OACZG,cAAeN,QACfO,cAAeP,QACfQ,kBAAmBL,OACnBM,cAAe,CACbC,KAAMV,QACNW,SAAS,GAEXC,gBAAiB,CACfF,KAAMP,OACNQ,QAAS,UAEXE,UAAW,CACTH,KAAMV,QACNW,SAAS,GAEXG,iBAAkB,CAChBJ,KAAMV,QACNW,SAAS,IAGbI,QAAS,WACP,MAAO,CACLC,QAAS9C,OAGbmB,KAAM,WACJ,MAAO,CACL4B,OAAQ,KAGZxB,QAAS,CACPyB,YAAa,WACX,IAAIC,EAAQjD,KAEZ,OAAO,IAAIkD,SAAQ,SAAUC,EAASC,GACpC,IAAIC,EAAS,GAEbJ,EAAMF,OAAOO,QAAO,SAAUC,EAASC,GACrC,OAAOD,EAAQE,MAAK,WAClB,IAAKJ,EAAOK,OACV,OAAOF,EAAMG,WAAWF,MAAK,SAAUG,GACjCA,GACFP,EAAOQ,KAAKD,WAKnBV,QAAQC,WAAWM,MAAK,WACrBJ,EAAOK,OACTN,EAAOC,GAEPF,WAKRW,YAAa,WACX,IAAIC,EAAS/D,KAEb,OAAO,IAAIkD,SAAQ,SAAUC,EAASC,GACpCF,QAAQc,IAAID,EAAOhB,OAAOkB,KAAI,SAAUC,GACtC,OAAOA,EAAKP,eACVF,MAAK,SAAUJ,GACjBA,EAASA,EAAOc,QAAO,SAAUD,GAC/B,OAAOA,KAGLb,EAAOK,OACTN,EAAOC,GAEPF,WAMRQ,SAAU,SAAkBzC,GAC1B,OAAIA,EACKlB,KAAKoE,cAAclD,GAGrBlB,KAAKqC,cAAgBrC,KAAKgD,cAAgBhD,KAAK8D,eAExDM,cAAe,SAAuBlD,GACpC,IAAImD,EAAUrE,KAAK+C,OAAOoB,QAAO,SAAUD,GACzC,OAAOA,EAAKhD,OAASA,KAGvB,OAAImD,EAAQX,OACH,IAAIR,SAAQ,SAAUC,EAASC,GACpCiB,EAAQ,GAAGV,WAAWF,MAAK,SAAUG,GAC/BA,EACFR,EAAOQ,GAEPT,UAMDD,QAAQE,UAGjBkB,gBAAiB,SAAyBpD,GACxClB,KAAK+C,OAAOwB,SAAQ,SAAUL,GACvBhD,GAAQgD,EAAKhD,OAASA,GACzBgD,EAAKI,sBAKXE,cAAe,SAAuBtD,EAAMuD,GAC1CzE,KAAK+C,OAAOwB,SAAQ,SAAUL,GACxBA,EAAKhD,OAASA,GAChBgD,EAAKQ,IAAIC,eAAeF,OAI9BG,SAAU,SAAkBpB,GAC1BxD,KAAK+C,OAAOc,KAAKL,GACjB,eAAaxD,KAAK+C,OAAQ/C,OAE5B6E,YAAa,SAAqBrB,GAChCxD,KAAK+C,OAAS/C,KAAK+C,OAAOoB,QAAO,SAAUD,GACzC,OAAOA,IAASV,MAGpBsB,UAAW,WACT,OAAO9E,KAAK+C,OAAOO,QAAO,SAAUyB,EAAMvB,GAExC,OADAuB,EAAKvB,EAAMtC,MAAQsC,EAAMwB,UAClBD,IACN,KAELxE,SAAU,SAAkB0E,GAC1BA,EAAMC,iBACNlF,KAAKmF,UAGPA,OAAQ,WACN,IAAIC,EAASpF,KAETqF,EAASrF,KAAK8E,YAClB9E,KAAK2D,WAAWF,MAAK,WACnB2B,EAAOE,MAAM,SAAUD,MACtBE,OAAM,SAAUlC,GACjB+B,EAAOE,MAAM,SAAU,CACrBD,OAAQA,EACRhC,OAAQA,IAGN+B,EAAOhD,eACTgD,EAAOZ,cAAcnB,EAAO,GAAGnC,WAKvCpB,OAAQ,WACN,IAAI0F,EAAIC,UAAU,GAClB,OAAOD,EAAE,OAAQ,CACf,MAAS7D,IACT,GAAM,CACJ,OAAU3B,KAAKO,WAEhB,CAACP,KAAK0F","file":"js/chunk-e417c882.736ce5a5.js","sourcesContent":["import '../../style/base.css';\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h1',[_vm._v(\"密码重置\")]),_c('van-form',{on:{\"submit\":_vm.onSubmit}},[_c('van-field',{attrs:{\"name\":\"username\",\"label\":\"用户名\",\"placeholder\":\"用户名\"},model:{value:(_vm.ruleForm.username),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"username\", $$v)},expression:\"ruleForm.username\"}}),_c('van-field',{attrs:{\"type\":\"password\",\"name\":\"oldpass\",\"label\":\"原密码\",\"placeholder\":\"原密码\"},model:{value:(_vm.ruleForm.oldpass),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"oldpass\", $$v)},expression:\"ruleForm.oldpass\"}}),_c('van-field',{attrs:{\"name\":\"newPass\",\"type\":\"password\",\"label\":\"新密码\",\"placeholder\":\"新密码\"},model:{value:(_vm.ruleForm.newPass),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"newPass\", $$v)},expression:\"ruleForm.newPass\"}}),_c('div',{staticStyle:{\"margin\":\"16px\"}},[_c('van-button',{attrs:{\"round\":\"\",\"block\":\"\",\"type\":\"info\",\"native-type\":\"submit\"}},[_vm._v(\"提交\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <h1>密码重置</h1>\r\n    <van-form @submit=\"onSubmit\">\r\n      <van-field v-model=\"ruleForm.username\" name=\"username\" label=\"用户名\" placeholder=\"用户名\" />\r\n      <van-field v-model=\"ruleForm.oldpass\"  type=\"password\" name=\"oldpass\" label=\"原密码\" placeholder=\"原密码\" />\r\n      <van-field\r\n        v-model=\"ruleForm.newPass\"\r\n        name=\"newPass\"\r\n        type=\"password\"\r\n        label=\"新密码\"\r\n        placeholder=\"新密码\"\r\n      />\r\n      <div style=\"margin: 16px;\">\r\n        <van-button round block type=\"info\" native-type=\"submit\">提交</van-button>\r\n      </div>\r\n    </van-form>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Vue from \"vue\";\r\nimport { Form } from \"vant\";\r\nVue.use(Form);\r\n\r\nexport default {\r\n  name: \"repassword\",\r\n  data() {\r\n    return {\r\n      ruleForm: {\r\n        username: \"\",\r\n        oldpass: \"\",\r\n        newPass: \"\",\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    async onSubmit(values) {\r\n      const { newPass } = this.ruleForm;\r\n      const { data } = await this.$request.post(\"/log/\", {\r\n        username: values.username,\r\n        oldpass: values.oldpass,\r\n      });\r\n      if (data.code === 1 && newPass !== \"\") {\r\n        //然后再修改密码\r\n        const { data } = await this.$request.put(\"/log/\", {\r\n        username: values.username,\r\n        newPass: values.newPass,\r\n        });\r\n        console.log(data.code);\r\n        if (data.code === 1) {\r\n          alert(\"恭喜你修改成功!\");\r\n          this.$router.push(\"/login\");\r\n        } else {\r\n          alert(\"修改失败!\");\r\n        }\r\n      } else {\r\n        alert(\"用户名或密码不存在!\");\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./repassword.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./repassword.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./repassword.vue?vue&type=template&id=7ea58258&\"\nimport script from \"./repassword.vue?vue&type=script&lang=js&\"\nexport * from \"./repassword.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { createNamespace } from '../utils';\nimport { sortChildren } from '../utils/vnodes';\n\nvar _createNamespace = createNamespace('form'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1];\n\nexport default createComponent({\n  props: {\n    colon: Boolean,\n    labelWidth: [Number, String],\n    labelAlign: String,\n    inputAlign: String,\n    scrollToError: Boolean,\n    validateFirst: Boolean,\n    errorMessageAlign: String,\n    submitOnEnter: {\n      type: Boolean,\n      default: true\n    },\n    validateTrigger: {\n      type: String,\n      default: 'onBlur'\n    },\n    showError: {\n      type: Boolean,\n      default: true\n    },\n    showErrorMessage: {\n      type: Boolean,\n      default: true\n    }\n  },\n  provide: function provide() {\n    return {\n      vanForm: this\n    };\n  },\n  data: function data() {\n    return {\n      fields: []\n    };\n  },\n  methods: {\n    validateSeq: function validateSeq() {\n      var _this = this;\n\n      return new Promise(function (resolve, reject) {\n        var errors = [];\n\n        _this.fields.reduce(function (promise, field) {\n          return promise.then(function () {\n            if (!errors.length) {\n              return field.validate().then(function (error) {\n                if (error) {\n                  errors.push(error);\n                }\n              });\n            }\n          });\n        }, Promise.resolve()).then(function () {\n          if (errors.length) {\n            reject(errors);\n          } else {\n            resolve();\n          }\n        });\n      });\n    },\n    validateAll: function validateAll() {\n      var _this2 = this;\n\n      return new Promise(function (resolve, reject) {\n        Promise.all(_this2.fields.map(function (item) {\n          return item.validate();\n        })).then(function (errors) {\n          errors = errors.filter(function (item) {\n            return item;\n          });\n\n          if (errors.length) {\n            reject(errors);\n          } else {\n            resolve();\n          }\n        });\n      });\n    },\n    // @exposed-api\n    validate: function validate(name) {\n      if (name) {\n        return this.validateField(name);\n      }\n\n      return this.validateFirst ? this.validateSeq() : this.validateAll();\n    },\n    validateField: function validateField(name) {\n      var matched = this.fields.filter(function (item) {\n        return item.name === name;\n      });\n\n      if (matched.length) {\n        return new Promise(function (resolve, reject) {\n          matched[0].validate().then(function (error) {\n            if (error) {\n              reject(error);\n            } else {\n              resolve();\n            }\n          });\n        });\n      }\n\n      return Promise.reject();\n    },\n    // @exposed-api\n    resetValidation: function resetValidation(name) {\n      this.fields.forEach(function (item) {\n        if (!name || item.name === name) {\n          item.resetValidation();\n        }\n      });\n    },\n    // @exposed-api\n    scrollToField: function scrollToField(name, options) {\n      this.fields.forEach(function (item) {\n        if (item.name === name) {\n          item.$el.scrollIntoView(options);\n        }\n      });\n    },\n    addField: function addField(field) {\n      this.fields.push(field);\n      sortChildren(this.fields, this);\n    },\n    removeField: function removeField(field) {\n      this.fields = this.fields.filter(function (item) {\n        return item !== field;\n      });\n    },\n    getValues: function getValues() {\n      return this.fields.reduce(function (form, field) {\n        form[field.name] = field.formValue;\n        return form;\n      }, {});\n    },\n    onSubmit: function onSubmit(event) {\n      event.preventDefault();\n      this.submit();\n    },\n    // @exposed-api\n    submit: function submit() {\n      var _this3 = this;\n\n      var values = this.getValues();\n      this.validate().then(function () {\n        _this3.$emit('submit', values);\n      }).catch(function (errors) {\n        _this3.$emit('failed', {\n          values: values,\n          errors: errors\n        });\n\n        if (_this3.scrollToError) {\n          _this3.scrollToField(errors[0].name);\n        }\n      });\n    }\n  },\n  render: function render() {\n    var h = arguments[0];\n    return h(\"form\", {\n      \"class\": bem(),\n      \"on\": {\n        \"submit\": this.onSubmit\n      }\n    }, [this.slots()]);\n  }\n});"],"sourceRoot":""}